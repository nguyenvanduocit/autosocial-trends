---
source: hackernews
title: X-ray: a Python library for finding bad redactions in PDF documents
url: https://github.com/freelawproject/x-ray
date: 2025-12-24
---

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ffreelawproject%2Fx-ray)

Appearance settings

* Platform

  + AI CODE CREATION
    - [GitHub CopilotWrite better code with AI](https://github.com/features/copilot)
    - [GitHub SparkBuild and deploy intelligent apps](https://github.com/features/spark)
    - [GitHub ModelsManage and compare prompts](https://github.com/features/models)
    - [MCP RegistryNewIntegrate external tools](https://github.com/mcp)
  + DEVELOPER WORKFLOWS
    - [ActionsAutomate any workflow](https://github.com/features/actions)
    - [CodespacesInstant dev environments](https://github.com/features/codespaces)
    - [IssuesPlan and track work](https://github.com/features/issues)
    - [Code ReviewManage code changes](https://github.com/features/code-review)
  + APPLICATION SECURITY
    - [GitHub Advanced SecurityFind and fix vulnerabilities](https://github.com/security/advanced-security)
    - [Code securitySecure your code as you build](https://github.com/security/advanced-security/code-security)
    - [Secret protectionStop leaks before they start](https://github.com/security/advanced-security/secret-protection)
  + EXPLORE
    - [Why GitHub](https://github.com/why-github)
    - [Documentation](https://docs.github.com)
    - [Blog](https://github.blog)
    - [Changelog](https://github.blog/changelog)
    - [Marketplace](https://github.com/marketplace)

  [View all features](https://github.com/features)
* Solutions

  + BY COMPANY SIZE
    - [Enterprises](https://github.com/enterprise)
    - [Small and medium teams](https://github.com/team)
    - [Startups](https://github.com/enterprise/startups)
    - [Nonprofits](https://github.com/solutions/industry/nonprofits)
  + BY USE CASE
    - [App Modernization](https://github.com/solutions/use-case/app-modernization)
    - [DevSecOps](https://github.com/solutions/use-case/devsecops)
    - [DevOps](https://github.com/solutions/use-case/devops)
    - [CI/CD](https://github.com/solutions/use-case/ci-cd)
    - [View all use cases](https://github.com/solutions/use-case)
  + BY INDUSTRY
    - [Healthcare](https://github.com/solutions/industry/healthcare)
    - [Financial services](https://github.com/solutions/industry/financial-services)
    - [Manufacturing](https://github.com/solutions/industry/manufacturing)
    - [Government](https://github.com/solutions/industry/government)
    - [View all industries](https://github.com/solutions/industry)

  [View all solutions](https://github.com/solutions)
* Resources

  + EXPLORE BY TOPIC
    - [AI](https://github.com/resources/articles?topic=ai)
    - [Software Development](https://github.com/resources/articles?topic=software-development)
    - [DevOps](https://github.com/resources/articles?topic=devops)
    - [Security](https://github.com/resources/articles?topic=security)
    - [View all topics](https://github.com/resources/articles)
  + EXPLORE BY TYPE
    - [Customer stories](https://github.com/customer-stories)
    - [Events & webinars](https://github.com/resources/events)
    - [Ebooks & reports](https://github.com/resources/whitepapers)
    - [Business insights](https://github.com/solutions/executive-insights)
    - [GitHub Skills](https://skills.github.com)
  + SUPPORT & SERVICES
    - [Documentation](https://docs.github.com)
    - [Customer support](https://support.github.com)
    - [Community forum](https://github.com/orgs/community/discussions)
    - [Trust center](https://github.com/trust-center)
    - [Partners](https://github.com/partners)
* Open Source

  + COMMUNITY
    - [GitHub SponsorsFund open source developers](https://github.com/sponsors)
  + PROGRAMS
    - [Security Lab](https://securitylab.github.com)
    - [Maintainer Community](https://maintainers.github.com)
    - [Accelerator](https://github.com/accelerator)
    - [Archive Program](https://archiveprogram.github.com)
  + REPOSITORIES
    - [Topics](https://github.com/topics)
    - [Trending](https://github.com/trending)
    - [Collections](https://github.com/collections)
* Enterprise

  + ENTERPRISE SOLUTIONS
    - [Enterprise platformAI-powered developer platform](https://github.com/enterprise)
  + AVAILABLE ADD-ONS
    - [GitHub Advanced SecurityEnterprise-grade security features](https://github.com/security/advanced-security)
    - [Copilot for BusinessEnterprise-grade AI features](https://github.com/features/copilot/copilot-business)
    - [Premium SupportEnterprise-grade 24/7 support](https://github.com/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

[ ]
Include my email address so I can be contacted

Cancel
 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Cancel
 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ffreelawproject%2Fx-ray)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=freelawproject%2Fx-ray)

Appearance settings

Resetting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[freelawproject](/freelawproject)
/
**[x-ray](/freelawproject/x-ray)**
Public

generated from [freelawproject/new-project-template](/freelawproject/new-project-template)

* ### Uh oh!

  There was an error while loading. Please reload this page.
* [Notifications](/login?return_to=%2Ffreelawproject%2Fx-ray) You must be signed in to change notification settings
* [Fork
  29](/login?return_to=%2Ffreelawproject%2Fx-ray)
* [Star
   271](/login?return_to=%2Ffreelawproject%2Fx-ray)

A tool to detect whether a PDF has a bad redaction

### License

[BSD-2-Clause license](/freelawproject/x-ray/blob/main/LICENSE)

[271
stars](/freelawproject/x-ray/stargazers) [29
forks](/freelawproject/x-ray/forks) [Branches](/freelawproject/x-ray/branches) [Tags](/freelawproject/x-ray/tags) [Activity](/freelawproject/x-ray/activity)

[Star](/login?return_to=%2Ffreelawproject%2Fx-ray)

[Notifications](/login?return_to=%2Ffreelawproject%2Fx-ray) You must be signed in to change notification settings

* [Code](/freelawproject/x-ray)
* [Issues
  10](/freelawproject/x-ray/issues)
* [Pull requests
  5](/freelawproject/x-ray/pulls)
* [Actions](/freelawproject/x-ray/actions)
* [Security

  ### Uh oh!

  There was an error while loading. Please reload this page.](/freelawproject/x-ray/security)
* [Insights](/freelawproject/x-ray/pulse)

Additional navigation options

* [Code](/freelawproject/x-ray)
* [Issues](/freelawproject/x-ray/issues)
* [Pull requests](/freelawproject/x-ray/pulls)
* [Actions](/freelawproject/x-ray/actions)
* [Security](/freelawproject/x-ray/security)
* [Insights](/freelawproject/x-ray/pulse)

# freelawproject/x-ray

main

[Branches](/freelawproject/x-ray/branches)[Tags](/freelawproject/x-ray/tags)

Go to file

Code

Open more actions menu

## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit   History[334 Commits](/freelawproject/x-ray/commits/main/) | | |
| [.github](/freelawproject/x-ray/tree/main/.github ".github") | | [.github](/freelawproject/x-ray/tree/main/.github ".github") |  |  |
| [tests](/freelawproject/x-ray/tree/main/tests "tests") | | [tests](/freelawproject/x-ray/tree/main/tests "tests") |  |  |
| [tools](/freelawproject/x-ray/tree/main/tools "tools") | | [tools](/freelawproject/x-ray/tree/main/tools "tools") |  |  |
| [xray](/freelawproject/x-ray/tree/main/xray "xray") | | [xray](/freelawproject/x-ray/tree/main/xray "xray") |  |  |
| [.editorconfig](/freelawproject/x-ray/blob/main/.editorconfig ".editorconfig") | | [.editorconfig](/freelawproject/x-ray/blob/main/.editorconfig ".editorconfig") |  |  |
| [.gitattributes](/freelawproject/x-ray/blob/main/.gitattributes ".gitattributes") | | [.gitattributes](/freelawproject/x-ray/blob/main/.gitattributes ".gitattributes") |  |  |
| [.gitignore](/freelawproject/x-ray/blob/main/.gitignore ".gitignore") | | [.gitignore](/freelawproject/x-ray/blob/main/.gitignore ".gitignore") |  |  |
| [.pre-commit-config.yaml](/freelawproject/x-ray/blob/main/.pre-commit-config.yaml ".pre-commit-config.yaml") | | [.pre-commit-config.yaml](/freelawproject/x-ray/blob/main/.pre-commit-config.yaml ".pre-commit-config.yaml") |  |  |
| [CHANGES.md](/freelawproject/x-ray/blob/main/CHANGES.md "CHANGES.md") | | [CHANGES.md](/freelawproject/x-ray/blob/main/CHANGES.md "CHANGES.md") |  |  |
| [LICENSE](/freelawproject/x-ray/blob/main/LICENSE "LICENSE") | | [LICENSE](/freelawproject/x-ray/blob/main/LICENSE "LICENSE") |  |  |
| [README.md](/freelawproject/x-ray/blob/main/README.md "README.md") | | [README.md](/freelawproject/x-ray/blob/main/README.md "README.md") |  |  |
| [SECURITY.md](/freelawproject/x-ray/blob/main/SECURITY.md "SECURITY.md") | | [SECURITY.md](/freelawproject/x-ray/blob/main/SECURITY.md "SECURITY.md") |  |  |
| [contributor\_license\_agreement.txt](/freelawproject/x-ray/blob/main/contributor_license_agreement.txt "contributor_license_agreement.txt") | | [contributor\_license\_agreement.txt](/freelawproject/x-ray/blob/main/contributor_license_agreement.txt "contributor_license_agreement.txt") |  |  |
| [mypy.ini](/freelawproject/x-ray/blob/main/mypy.ini "mypy.ini") | | [mypy.ini](/freelawproject/x-ray/blob/main/mypy.ini "mypy.ini") |  |  |
| [pyproject.toml](/freelawproject/x-ray/blob/main/pyproject.toml "pyproject.toml") | | [pyproject.toml](/freelawproject/x-ray/blob/main/pyproject.toml "pyproject.toml") |  |  |
| [redacted.png](/freelawproject/x-ray/blob/main/redacted.png "redacted.png") | | [redacted.png](/freelawproject/x-ray/blob/main/redacted.png "redacted.png") |  |  |
| [setup.cfg](/freelawproject/x-ray/blob/main/setup.cfg "setup.cfg") | | [setup.cfg](/freelawproject/x-ray/blob/main/setup.cfg "setup.cfg") |  |  |
| [tox.ini](/freelawproject/x-ray/blob/main/tox.ini "tox.ini") | | [tox.ini](/freelawproject/x-ray/blob/main/tox.ini "tox.ini") |  |  |
| [uv.lock](/freelawproject/x-ray/blob/main/uv.lock "uv.lock") | | [uv.lock](/freelawproject/x-ray/blob/main/uv.lock "uv.lock") |  |  |
| View all files | | |

## Repository files navigation

* README
* BSD-2-Clause license
* Security

[![Image of REDACTED STAMP](https://raw.githubusercontent.com/freelawproject/x-ray/main/redacted.png)](https://raw.githubusercontent.com/freelawproject/x-ray/main/redacted.png)

x-ray is a Python library for finding bad redactions in PDF documents.

## Why?

At Free Law Project, we collect millions of PDFs. An ongoing problem
is that people fail to properly redact things. Instead of doing it the right
way, they just draw a black rectangle or a black highlight on top of black
text and call it a day. Well, when that happens you just select the text under
the rectangle, and you can read it again. Not great.

After witnessing this problem for years, we decided it would be good to figure
out how common it is, so, with some help, we built this simple tool. You give
the tool the path to a PDF. It tells you if it has worthless redactions in it.

## What next?

Right now, `x-ray` works pretty well and we are using it to analyze documents
in our collections. It could be better though. Bad redactions take many forms.
See the issues tab for other examples we don't yet support. We'd love your
help solving some of tougher cases.

## Installation

With uv, do:

```
uv add x-ray
```

With pip, that'd be:

```
pip install x-ray
```

## Usage

`uvx` lets you run this without even installing it. For example, here's an amicus brief we filed that doesn't have any bad redactions:

```
uvx --from x-ray xray https://storage.courtlistener.com/recap/gov.uscourts.ca3.125346/gov.uscourts.ca3.125346.45.0.pdf
{}
```

Once you *do* install x-ray, you can easily use it on the command line. Once installed, just:

```
% xray path/to/your/file.pdf
{
  "1": [
    {
      "bbox": [
        58.550079345703125,
        72.19873046875,
        75.65007781982422,
        739.3987426757812
      ],
      "text": "The Ring travels by way of Cirith Ungol"
    }
  ]
}
```

Or if you have the file on a server somewhere, give it a URL. If it starts with `https://`, it will be interpreted as a PDF to download. Here's congressional testimony our directory made (it doesn't have any bad redactions):

```
% xray https://free.law/pdf/congressional-testimony-michael-lissner-free-law-project-hearing-on-ethics-and-transparency-2021-10-26.pdf
{}
```

A fun trick you can do is to make a file with one URL per line, call it `urls.txt`. Then you can run this to check each URL:

```
xargs -n 1 xray  < urls.txt
```

However you run `xray` on the command line, you'll get JSON as output. When you have that, you can use it with tools like [`jq`](https://stedolan.github.io/jq/). The format is as follows:

* It's a dict.
* The keys are page numbers.
* Each page number maps to a list of dicts.
* Each of those dicts maps to two keys.
* The first key is `bbox`. This is a four-tuple that indicates the x,y positions of the upper left corner and then lower right corners of the bad redaction.
* The second key is `text`. This is the text under the bad rectangle.

Simple enough.

You can also use it as a Python module, if you prefer the long-form:

```
% python -m xray some-file.pdf
```

But that's not as easy to remember.

If you want a bit more, you can, of course, use `xray` in Python:

```
from pprint import pprint
import xray
bad_redactions = xray.inspect("some/path/to/your/file.pdf")  # Pathlib works too
pprint(bad_redactions)
{1: [{'bbox': (58.550079345703125,
               72.19873046875,
               75.65007781982422,
               739.3987426757812),
      'text': 'Aragorn is the one true king.'}]}
```

The output is the same as above, except it's a Python object, not a JSON object.

If you already have the file contents as a `bytes` object, that'll work too:

```
some_bytes = requests.get("https://lotr-secrets.com/some-doc.pdf").content
bad_redactions = xray.inspect(some_bytes)
```

Note that because the `inspect` method uses the same signature no matter what,
the type of the object you give it is essential:

| Input | `xray`'s Assumption |
| --- | --- |
| `str` or Pathlib `Path` | local file |
| `str` that starts with `https://` | URL to download |
| `bytes` | PDF in memory |

This means that if you provide the filename on disk as a bytes object instead
of a `str`, it's not going to work. This will fail:

```
xray.inspect(b"some-file-path.pdf")
```

That's pretty much it. There are no configuration files or other variables to
learn. You give it a file name. If there is a bad redaction in it, you'll soon
find out.

## How it works

Under the covers, `xray` uses the high-performant [PyMuPDF project](https://pymupdf.readthedocs.io/) to parse PDFs. It has been a wonderful project to work with.

You can read the source to see how it works, but the general idea is to:

1. Find rectangles in a PDF.
2. Find letters in the same location
3. Render the rectangle as an image
4. Inspect the rectangle to see if it's all one color. If it is, then that's a
   bad redaction. If not, then we assume you can see a mix of text and
   drawings, indicating a redaction that's OK.

The PDF format is a big and complicated one, so it's difficult to do all this perfectly. We do our best, but there's always more to do to make it better. [Donations](https://free.law/donate/) and sponsored work help.

## Contributions

Please see the issues list on Github for things we need, or start a conversation if you have questions. Before you do your first contribution, we'll need a signed contributor license agreement. See the template in the repo.

## Deployment

Releases happen automatically via Github Actions. To trigger an automated build:

0. Update CHANGES.md
1. Update the version in pyproject.toml
2. Tag the commit with something like "v0.0.0".

If you wish to create a new version manually, the process is:

1. Update version info in `pyproject.toml`
2. Configure your Pypi credentials [with Poetry](https://python-poetry.org/docs/repositories/#configuring-credentials)
3. Build and publish the version:

```
poetry publish --build
```

## License

This repository is available under the permissive BSD license, making it easy and safe to incorporate in your own libraries.

Pull and feature requests welcome. Online editing in GitHub is possible (and easy!).

## About

A tool to detect whether a PDF has a bad redaction

### Resources

[Readme](#readme-ov-file)

### License

[BSD-2-Clause license](#BSD-2-Clause-1-ov-file)

### Security policy

[Security policy](#security-ov-file)

### Uh oh!

There was an error while loading. Please reload this page.

[Activity](/freelawproject/x-ray/activity)

[Custom properties](/freelawproject/x-ray/custom-properties)

### Stars

[**271**
stars](/freelawproject/x-ray/stargazers)

### Watchers

[**14**
watching](/freelawproject/x-ray/watchers)

### Forks

[**29**
forks](/freelawproject/x-ray/forks)

[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Ffreelawproject%2Fx-ray&report=freelawproject+%28user%29)

## [Releases 1](/freelawproject/x-ray/releases)

[v0.3.5

Latest

Dec 8, 2025](/freelawproject/x-ray/releases/tag/v0.3.5)

## Sponsor this project

### Uh oh!

There was an error while loading. Please reload this page.

* <https://www.courtlistener.com/donate/?referrer=github-courtlistener>

[Learn more about GitHub Sponsors](/sponsors)

## [Packages 0](/orgs/freelawproject/packages?repo_name=x-ray)

No packages published

### Uh oh!

There was an error while loading. Please reload this page.

## [Contributors 12](/freelawproject/x-ray/graphs/contributors)

* [![@mlissner](https://avatars.githubusercontent.com/u/236970?s=64&v=4)](https://github.com/mlissner)
* [![@dependabot[bot]](https://avatars.githubusercontent.com/in/29110?s=64&v=4)](https://github.com/apps/dependabot)
* [![@pre-commit-ci[bot]](https://avatars.githubusercontent.com/in/68672?s=64&v=4)](https://github.com/apps/pre-commit-ci)
* [![@dependabot-preview[bot]](https://avatars.githubusercontent.com/in/2141?s=64&v=4)](https://github.com/apps/dependabot-preview)
* [![@adamchainz](https://avatars.githubusercontent.com/u/857609?s=64&v=4)](https://github.com/adamchainz)
* [![@albertisfu](https://avatars.githubusercontent.com/u/486004?s=64&v=4)](https://github.com/albertisfu)
* [![@ttys0dev](https://avatars.githubusercontent.com/u/126845556?s=64&v=4)](https://github.com/ttys0dev)
* [![@quevon24](https://avatars.githubusercontent.com/u/6474994?s=64&v=4)](https://github.com/quevon24)
* [![@ImgBotApp](https://avatars.githubusercontent.com/u/31427850?s=64&v=4)](https://github.com/ImgBotApp)
* [![@gabebw](https://avatars.githubusercontent.com/u/257678?s=64&v=4)](https://github.com/gabebw)
* [![@epicfaace](https://avatars.githubusercontent.com/u/1689183?s=64&v=4)](https://github.com/epicfaace)
* [![@flooie](https://avatars.githubusercontent.com/u/6464529?s=64&v=4)](https://github.com/flooie)

## Languages

* [Python
  100.0%](/freelawproject/x-ray/search?l=python)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Community](https://github.community/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.
