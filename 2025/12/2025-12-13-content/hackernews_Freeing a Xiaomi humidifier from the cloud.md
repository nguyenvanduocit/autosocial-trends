---
source: hackernews
title: Freeing a Xiaomi humidifier from the cloud
url: https://0l.de/blog/2025/11/xiaomi-humidifier/
date: 2025-12-13
---

[Skip to content](#_top)

[![stv0g's weblog](/_astro/logo-dark.mguK16Ni.svg) ![stv0g's weblog](/_astro/logo-light.DBecYqXm.svg)  stv0g's weblog](/)

Search  `CtrlK`

Cancel

[Codeberg](https://codeberg.org/stv0g)[Mastodon](https://chaos.social/%40stv0g)[LinkedIn](https://www.linkedin.com/in/stv0g/)[ORCID](https://orcid.org/0000-0003-3384-6750)[RSS](https://0l.de/blog/rss.xml)

* [All posts](/blog/)
* Featured posts
  + [Running a Xilinx hw\_server as Docker Container](/blog/2022/02/dockerized-xilinx-hw-server/)
  + [Seminar: Camera-based PCB Analysis for Solder Paste Dispensing](/blog/2015/05/seminar/)
  + [Bachelor Thesis: Extended Abstract](/blog/2015/01/bachelor-thesis-abstract/)
  + [tileLED](/blog/2014/02/tile-led/)
* Recent posts
  + [Freeing a Xiaomi Humidifier from the Cloud](/blog/2025/11/xiaomi-humidifier/)
  + [This blog has joined the Fediverse](/blog/2023/10/blog-fediverse/)
  + [Fritz!DNS - An authoritative DNS server for AVM FRITZ!Box routers](/blog/2023/01/fritz-dns/)
  + [Aachen wird Transparent!](/blog/2022/08/aachen-transparent/)
  + [A highly available WireGuard VPN setup](/blog/2022/07/wireguard-ha/)
  + [SSH Access for Netgear's Nighthawk M5 Mobile LTE/Router](/blog/2022/07/netgear-m5-ssh-access/)
  + [Having a detailed look at the Netgear Nighthawk M5 Mobile LTE/Router](/blog/2022/06/netgear-m5-reveng/)
  + [A 3D-printed wall mount for Netgear Nighthawk mobile 5G/LTE routers](/blog/2022/06/netgear-m5-wall-mount/)
  + [Gaining Root Access on Netgear Nighthawk Mobile 5G/LTE Routers](/blog/2022/06/netgear-m5-root-access/)
  + [Open-Data Lab Aachen](/blog/2022/06/open-data-lab-aachen/)
* Tags
  + [German (35)](/blog/tags/german/)
  + [Linux (19)](/blog/tags/linux/)
  + [Study (18)](/blog/tags/study/)
  + [Electronics (15)](/blog/tags/electronics/)
  + [English (15)](/blog/tags/english/)
  + [Development (14)](/blog/tags/development/)
  + [Software (12)](/blog/tags/software/)
  + [C++ (11)](/blog/tags/c/)
  + [Project (10)](/blog/tags/project/)
  + [Microcontroller (9)](/blog/tags/microcontroller/)
  + [School (9)](/blog/tags/school/)
  + [Hacking (6)](/blog/tags/hacking/)
  + [Meta (6)](/blog/tags/meta/)
  + [Networking (6)](/blog/tags/networking/)
  + [Smart Meter (6)](/blog/tags/smart-meter/)
  + [Webdesign (6)](/blog/tags/webdesign/)
  + [fnordlicht (5)](/blog/tags/fnordlicht/)
  + [PHP (5)](/blog/tags/php/)
  + [Script (5)](/blog/tags/script/)
  + [Talk (5)](/blog/tags/talk/)
  + [volkszaehler (5)](/blog/tags/volkszaehler/)
  + [Blog (4)](/blog/tags/blog/)
  + [Computer (4)](/blog/tags/computer/)
  + [Event (4)](/blog/tags/event/)
  + [LED (4)](/blog/tags/led/)
  + [Netgear Nighhawk M5 (4)](/blog/tags/netgear-nighhawk-m5/)
  + [TFA (4)](/blog/tags/tfa/)
  + [Thesis (4)](/blog/tags/thesis/)
  + [3D (3)](/blog/tags/3d/)
  + [Aachen (3)](/blog/tags/aachen/)
  + [Computer Science (3)](/blog/tags/computer-science/)
  + [elektro-camp (3)](/blog/tags/elektro-camp/)
  + [Geocaching (3)](/blog/tags/geocaching/)
  + [Hardware (3)](/blog/tags/hardware/)
  + [Politics (3)](/blog/tags/politics/)
  + [3D Printing (2)](/blog/tags/3d-printing/)
  + [Cheatsheet (2)](/blog/tags/cheatsheet/)
  + [Delphi (2)](/blog/tags/delphi/)
  + [DVBViewer (2)](/blog/tags/dvbviewer/)
  + [FÖJ (2)](/blog/tags/f%C3%B6j/)
  + [Git (2)](/blog/tags/git/)
  + [LCD (2)](/blog/tags/lcd/)
  + [nulll (2)](/blog/tags/nulll/)
  + [Open Data (2)](/blog/tags/open-data/)
  + [OpenCV (2)](/blog/tags/opencv/)
  + [Qt (2)](/blog/tags/qt/)
  + [Windows (2)](/blog/tags/windows/)
  + [2D (1)](/blog/tags/2d/)
  + [Abstract (1)](/blog/tags/abstract/)
  + [ACS (1)](/blog/tags/acs/)
  + [Art (1)](/blog/tags/art/)
  + [Assembler (1)](/blog/tags/assembler/)
  + [Award (1)](/blog/tags/award/)
  + [Bash (1)](/blog/tags/bash/)
  + [Basic (1)](/blog/tags/basic/)
  + [Casio (1)](/blog/tags/casio/)
  + [Cologne (1)](/blog/tags/cologne/)
  + [Community (1)](/blog/tags/community/)
  + [crypto-party (1)](/blog/tags/crypto-party/)
  + [Decentralization (1)](/blog/tags/decentralization/)
  + [Design (1)](/blog/tags/design/)
  + [DIY (1)](/blog/tags/diy/)
  + [dn42 (1)](/blog/tags/dn42/)
  + [Docker (1)](/blog/tags/docker/)
  + [EAGLE (1)](/blog/tags/eagle/)
  + [Ehrenamt (1)](/blog/tags/ehrenamt/)
  + [ESPHome (1)](/blog/tags/esphome/)
  + [FAQ (1)](/blog/tags/faq/)
  + [FPGA (1)](/blog/tags/fpga/)
  + [Fritz!Box (1)](/blog/tags/fritzbox/)
  + [Fuel Cell (1)](/blog/tags/fuel-cell/)
  + [GitHub (1)](/blog/tags/github/)
  + [Go (1)](/blog/tags/go/)
  + [HTML (1)](/blog/tags/html/)
  + [Infrared (1)](/blog/tags/infrared/)
  + [Integration (1)](/blog/tags/integration/)
  + [Javascript (1)](/blog/tags/javascript/)
  + [Job (1)](/blog/tags/job/)
  + [Logo (1)](/blog/tags/logo/)
  + [Migration (1)](/blog/tags/migration/)
  + [MTB (1)](/blog/tags/mtb/)
  + [Music (1)](/blog/tags/music/)
  + [Offenburg (1)](/blog/tags/offenburg/)
  + [Open Source (1)](/blog/tags/open-source/)
  + [OSM (1)](/blog/tags/osm/)
  + [Photos (1)](/blog/tags/photos/)
  + [Python (1)](/blog/tags/python/)
  + [Reverse Engineering (1)](/blog/tags/reverse-engineering/)
  + [Review (1)](/blog/tags/review/)
  + [Robotics (1)](/blog/tags/robotics/)
  + [RYL (1)](/blog/tags/ryl/)
  + [Schule (1)](/blog/tags/schule/)
  + [Security (1)](/blog/tags/security/)
  + [Security Token (1)](/blog/tags/security-token/)
  + [Seminar (1)](/blog/tags/seminar/)
  + [Smart Home (1)](/blog/tags/smart-home/)
  + [Social Media (1)](/blog/tags/social-media/)
  + [Stuttgart (1)](/blog/tags/stuttgart/)
  + [Travel (1)](/blog/tags/travel/)
  + [USB (1)](/blog/tags/usb/)
  + [VPN (1)](/blog/tags/vpn/)
  + [WhatsApp (1)](/blog/tags/whatsapp/)
  + [Wiki (1)](/blog/tags/wiki/)
  + [Wireguard (1)](/blog/tags/wireguard/)
  + [Workshop (1)](/blog/tags/workshop/)
  + [Xiaomi (1)](/blog/tags/xiaomi/)
  + [Xilinx (1)](/blog/tags/xilinx/)
  + [XMPP (1)](/blog/tags/xmpp/)
* [RSS](/blog/rss.xml)

[Codeberg](https://codeberg.org/stv0g)[Mastodon](https://chaos.social/%40stv0g)[LinkedIn](https://www.linkedin.com/in/stv0g/)[ORCID](https://orcid.org/0000-0003-3384-6750)[RSS](https://0l.de/blog/rss.xml)

# Freeing a Xiaomi Humidifier from the Cloud

![Home Assistant Logo](/_astro/ha_logo.Cos3TBAy_1v0uk9.svg)

I recently moved into a new apartment which I used as an opportunity to make our home a little smarter.
As a big open source supporter I built my smart home platform with [Home Assistant](https://www.home-assistant.io/) of course.

Unfortunately, there are still far too few products that are directly compatible with Home Assistant.
Especially in the area of humidifiers where I only found products that rely on a proprietary app or cloud from the manufacturer.
Something that I would like to avoid at all costs.
For one thing, such dependence is a certain form of [planned obsolescence](https://en.wikipedia.org/wiki/Planned_obsolescence), as the product becomes useless as soon as the app loses its compatibility with new smartphone operating system versions or the manufacturer’s cloud is no longer operated.

Therefore, it was important for me to find a smart humidifier that integrates directly with my Home Assistant setup.
To achieve this goal, I identified two options:

1. Add sensors / actuators to a classic humidifier to make it smart.
2. Replace the firmware of a smart humidifier with my own source code.

I decided to use the second approach, because it required less effort, since I would have had to implement my own firmware anyway.

![ESPHome Logo](/_astro/esphome-logo.DEBynjiy_Z233Hc6.svg)

Next, I was faced with the task of finding a suitable humidifier whose firmware I could easily replace.
I specifically looked for devices that contained an ESP8266 or ESP32 microcontroller from [Espressif](https://www.espressif.com/), because for these I could easily create a new firmware with [ESPHome](https://esphome.io/).

ESPHome is a system that allows you to control your ESP8266/ESP32 through simple but powerful configuration files and remotely control it through home automation systems.

![Xiaomi Mi Smart Antibacterial Humidifier](/_astro/xiaomi-humidifier.CBLqLRea_1QK3k2.webp)

Xiaomi Mi Smart Antibacterial Humidifier.

Thanks to Sören Beye  [/Hypfer](https://github.com/Hypfer)  , I quickly became aware of the [Xiaomi Mi Smart Antibacterial Humidifier](https://www.mi.com/de/product/mi-smart-antibacterial-humidifier/), as Sören himself wrote his own firmware for this humidifier.

Unfortunately, his original version of the customized firmware ( [/Hypfer/esp8266-deerma-humidifier](https://github.com/Hypfer/esp8266-deerma-humidifier)  ) is no longer compatible with the current version of the producr, as Xiaomi has modified the internal communication protocol.

Therefore, I decided to re-implement the firmware based on ESPHome as an “external component”.

**You can find the code for this component here:**  [/stv0g/esphome-config/components/xiaomi\_deerma\_humidifier](https://codeberg.org/stv0g/esphome-config/src/master/components/xiaomi_deerma_humidifier)

## How to Hack your own Humidifier

[Section titled “How to Hack your own Humidifier”](#how-to-hack-your-own-humidifier)

This section is going to walk you through the process of modifying your own Xiaomi Humidifier.

1. **Find the correct model**

   The internal Mi Model ID of the supported device is `deerma.humidifier.jsq`.
   The Model on the packaging being `ZNJSQ01DEM`.
2. **Disassembly**

   There are 4 Philips-head screws hidden under the rubber foot ring which can be easily pealed of.
   Its usually find to remove the rubber only in areas where the screws are located.
   That way you can easily reattach it later.

   ![Internals of the Humidifier](/_astro/humidifier-inside.B6D-LQ_p_1AFO4w.webp)

   Internals of the Humidifier.

   ![Bottom view of Humidifier. Screws are behind rubber foot ring](/_astro/humidifier-bottom.CjcuyanY_tWOrG.webp)

   Bottom view of Humidifier. Screws are behind rubber foot ring.

   In the inside, you will find a small Wifi module attached to the back of the housing.
   Remove the module and solder on the wires as shown in the picture below.
3. **Wire UART**

   ![Wifi board featuring an ESP-WROOM-02 module](/_astro/humidifier-wifi.Csw5RgQW_Z2nYTUv.webp)

   Wifi board featuring an ESP-WROOM-02 module.

   In the last picture, the colors of the wires correspond to the following:

   * **Orange:** GND
   * **Grey:** VCC (3.3 Volt!)
   * **Yellow:** GPIO0
   * **Brown:** RX
   * **Red:** TX

   In order to flash the module, you will need to tie `GPIO0` to GND and attach a **3.3V** serial adapter to the `RX`, `TX` pins.
   I recommend to also to disconnect the module from the humidifier and power it via your Serial to USB adapter via the `VCC` pin.

   To flash the ESP8266 chip you can either use ESPHome’s build-in web flasher or `esptool.py`.
4. **Create backup of original firmware**

   But before we flash the new firmware, I recommend to first make a backup of the original Xiaomi firmware by running:

   Terminal window

   ```
   esptool.py \

   --chip esp8266 \

   --baud 230400 \

   --port /dev/tty.usbserial-31310 \

   read_flash 0x0 0x200000 xiaomi-deerma-humidfier-original-2mb.bin
   ```
5. **Flash new firmware**

   Afterwards, we can flash the new firmware:

   Terminal window

   ```
   esptool.py \

   --chip esp8266 \

   --baud 230400 \

   --port /dev/tty.usbserial-31310 \

   write_flash 0x0 deerma.bin
   ```
